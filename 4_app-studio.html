<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Studio — Valtor AI</title>
<link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@400;500;600;700&family=Cabinet+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root{--bg:#1a1a1a;--s1:#222222;--s2:#2a2a2a;--s3:#303030;--border:#3a3a3a;--a1:#e8356d;--a2:#ff6b35;--a3:#7c5cbf;--text:#ffffff;--muted:#aaaaaa;--glow1:rgba(232,53,109,0.2);--sidebar:260px;}
*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);color:#fff;font-family:'Cabinet Grotesk',sans-serif;display:flex;min-height:100vh;}
h1,h2,h3,h4{font-family:'Clash Display',sans-serif;color:#fff;}

/* SIDEBAR */
.sidebar{width:var(--sidebar);background:var(--s1);border-right:1px solid var(--border);display:flex;flex-direction:column;position:fixed;top:0;bottom:0;left:0;z-index:50;}
.sidebar-top{padding:20px;border-bottom:1px solid var(--border);}
.brand{display:flex;align-items:center;gap:10px;margin-bottom:20px;}
.brand-icon{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,var(--a1),var(--a2));display:flex;align-items:center;justify-content:center;}
.brand-name{font-family:'Clash Display',sans-serif;font-size:18px;font-weight:700;color:#fff;}
.user-card{background:var(--s2);border:1px solid var(--border);border-radius:12px;padding:14px;}
.user-row{display:flex;align-items:center;gap:10px;margin-bottom:10px;}
.avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--a1),var(--a3));display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;flex-shrink:0;color:#fff;}
.user-name{font-size:14px;font-weight:700;color:#fff;}
.user-plan{font-size:11px;color:var(--muted);}
.credit-bar-label{display:flex;justify-content:space-between;font-size:11px;color:var(--muted);margin-bottom:6px;}
.credit-bar-label span{color:var(--a2);font-weight:700;}
.credit-bar{height:4px;background:var(--border);border-radius:100px;overflow:hidden;}
.credit-fill{height:100%;background:linear-gradient(90deg,var(--a1),var(--a2));border-radius:100px;transition:width 0.5s;}
.sidebar-nav{flex:1;padding:16px;overflow-y:auto;}
.nav-section-label{font-size:10px;text-transform:uppercase;letter-spacing:1.5px;color:var(--muted);font-weight:700;margin:16px 0 8px;padding-left:8px;}
.nav-item{display:flex;align-items:center;gap:12px;padding:11px 12px;border-radius:10px;cursor:pointer;transition:all 0.15s;margin-bottom:2px;font-size:14px;font-weight:500;color:var(--muted);border:1px solid transparent;}
.nav-item:hover{color:#fff;background:var(--s2);}
.nav-item.active{color:#fff;background:rgba(232,53,109,0.1);border-color:rgba(232,53,109,0.2);}
.nav-icon{width:22px;height:22px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.upgrade-banner{margin:12px;background:linear-gradient(135deg,rgba(232,53,109,0.12),rgba(255,107,53,0.08));border:1px solid rgba(232,53,109,0.2);border-radius:14px;padding:16px;}
.upgrade-title{font-size:13px;font-weight:700;margin-bottom:6px;color:#fff;}
.upgrade-sub{font-size:11px;color:var(--muted);margin-bottom:12px;line-height:1.5;}
.upgrade-btn{width:100%;padding:10px;border-radius:10px;border:none;cursor:pointer;background:linear-gradient(135deg,var(--a1),var(--a2));color:#fff;font-family:'Cabinet Grotesk',sans-serif;font-weight:700;font-size:13px;transition:all 0.2s;}
.upgrade-btn:hover{transform:translateY(-1px);box-shadow:0 4px 20px var(--glow1);}

/* MAIN */
.main{margin-left:var(--sidebar);flex:1;display:flex;flex-direction:column;}
.topbar{position:sticky;top:0;z-index:40;background:rgba(26,26,26,0.9);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 32px;height:60px;display:flex;align-items:center;justify-content:space-between;}
.page-title{font-family:'Clash Display',sans-serif;font-size:18px;font-weight:700;color:#fff;}
.topbar-right{display:flex;align-items:center;gap:12px;}
.credit-chip{display:flex;align-items:center;gap:6px;background:var(--s1);border:1px solid var(--border);border-radius:100px;padding:6px 14px;font-size:13px;font-weight:700;color:#fff;}
.credit-dot{width:8px;height:8px;background:var(--a2);border-radius:50%;animation:pulse 2s infinite;}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}
.content{flex:1;padding:28px 32px;}

/* WORKSPACES */
.workspace{display:none;grid-template-columns:320px 1fr;gap:20px;align-items:start;}
.workspace.active{display:grid;}

/* CONTROL PANEL */
.ctrl-panel{background:var(--s1);border:1px solid var(--border);border-radius:18px;padding:24px;display:flex;flex-direction:column;gap:18px;}
.ctrl-label{font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--muted);font-weight:700;display:flex;align-items:center;justify-content:space-between;}
.ctrl-label span{font-size:10px;color:var(--a2);font-weight:400;text-transform:none;letter-spacing:0;}
.ctrl-group{display:flex;flex-direction:column;gap:8px;}
textarea,input[type=text],select{width:100%;background:var(--s2);border:1px solid var(--border);border-radius:10px;color:#fff;font-family:'Cabinet Grotesk',sans-serif;font-size:14px;padding:12px 14px;outline:none;transition:all 0.2s;resize:none;}
textarea:focus,input[type=text]:focus,select:focus{border-color:var(--a1);box-shadow:0 0 0 3px rgba(232,53,109,0.08);}
textarea::placeholder,input::placeholder{color:var(--muted);}
select option{background:var(--s2);color:#fff;}
.chips{display:flex;flex-wrap:wrap;gap:6px;}
.chip{padding:5px 13px;border-radius:100px;border:1px solid var(--border);font-size:12px;cursor:pointer;transition:all 0.15s;color:var(--muted);background:var(--s2);font-weight:500;}
.chip:hover{border-color:rgba(232,53,109,0.4);color:#fff;}
.chip.on{background:rgba(232,53,109,0.12);border-color:rgba(232,53,109,0.35);color:var(--a1);font-weight:700;}
.range-row{display:flex;justify-content:space-between;font-size:12px;margin-bottom:6px;color:var(--muted);}
.range-val{color:var(--a2);font-weight:700;}
input[type=range]{width:100%;accent-color:var(--a1);cursor:pointer;}
.cost-badge{display:flex;align-items:center;justify-content:center;gap:6px;background:rgba(255,107,53,0.08);border:1px solid rgba(255,107,53,0.2);border-radius:10px;padding:10px;font-size:13px;font-weight:700;color:var(--a2);}
.gen-btn{width:100%;padding:15px;border-radius:14px;border:none;cursor:pointer;background:linear-gradient(135deg,var(--a1),var(--a2));color:#fff;font-family:'Clash Display',sans-serif;font-weight:700;font-size:16px;transition:all 0.2s;box-shadow:0 0 24px rgba(232,53,109,0.2);position:relative;overflow:hidden;}
.gen-btn:hover{transform:translateY(-2px);box-shadow:0 8px 40px rgba(232,53,109,0.3);}
.gen-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none;}

/* OUTPUT */
.out-panel{background:var(--s1);border:1px solid var(--border);border-radius:18px;padding:24px;min-height:520px;display:flex;flex-direction:column;gap:16px;}
.out-header{display:flex;align-items:center;justify-content:space-between;}
.out-title{font-size:16px;font-weight:700;color:#fff;}
.out-actions{display:flex;gap:8px;}
.out-btn{padding:7px 14px;border-radius:9px;border:1px solid var(--border);background:transparent;color:var(--muted);cursor:pointer;font-size:12px;font-weight:700;transition:all 0.2s;font-family:'Cabinet Grotesk',sans-serif;display:flex;align-items:center;gap:5px;}
.out-btn:hover{border-color:rgba(255,255,255,0.15);color:#fff;}
.output-canvas{flex:1;background:var(--s2);border:1px solid var(--border);border-radius:14px;min-height:400px;position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;}
.empty-state{text-align:center;color:var(--muted);}
.empty-icon{width:60px;height:60px;margin:0 auto 12px;opacity:0.2;}
.loader{position:absolute;inset:0;background:var(--s2);border-radius:14px;display:none;flex-direction:column;align-items:center;justify-content:center;gap:16px;z-index:5;}
.loader.show{display:flex;}
.spin{width:44px;height:44px;border:3px solid var(--border);border-top-color:var(--a1);border-radius:50%;animation:spin 0.8s linear infinite;}
@keyframes spin{to{transform:rotate(360deg)}}
.load-text{font-size:14px;color:var(--muted);animation:blink 1.5s infinite;}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0.4}}
.load-step{font-size:12px;color:var(--muted);opacity:0.6;}
.progress-wrap{width:220px;}
.prog-bar{height:3px;background:var(--border);border-radius:100px;overflow:hidden;margin-top:8px;}
.prog-fill{height:100%;background:linear-gradient(90deg,var(--a1),var(--a2));border-radius:100px;transition:width 0.4s;width:0%;}
.result-img{width:100%;border-radius:10px;object-fit:contain;max-height:480px;display:none;}
.result-video{width:100%;border-radius:10px;display:none;}
.result-audio-wrap{display:none;width:100%;padding:20px;text-align:center;}
.result-text-wrap{display:none;width:100%;padding:24px;text-align:left;font-size:14px;line-height:1.8;color:#fff;white-space:pre-wrap;max-height:480px;overflow-y:auto;}

/* DASHBOARD */
.section-content{display:none;}
.dash-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:28px;}
.dash-card{background:var(--s1);border:1px solid var(--border);border-radius:16px;padding:22px;}
.dash-card-icon{width:44px;height:44px;border-radius:12px;background:rgba(255,255,255,0.06);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;margin-bottom:12px;}
.dash-card-val{font-family:'Clash Display',sans-serif;font-size:36px;font-weight:700;background:linear-gradient(135deg,var(--a1),var(--a2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.dash-card-label{font-size:13px;color:var(--muted);margin-top:4px;}
.quick-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;}
.quick-card{background:var(--s1);border:1px solid var(--border);border-radius:14px;padding:18px;cursor:pointer;transition:all 0.2s;}
.quick-card:hover{border-color:rgba(232,53,109,0.3);transform:translateY(-2px);}
.quick-icon{width:40px;height:40px;border-radius:10px;background:rgba(255,255,255,0.06);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;margin-bottom:10px;}
.quick-title{font-weight:700;margin-bottom:4px;font-size:14px;color:#fff;}
.quick-sub{font-size:12px;color:var(--muted);}

/* GALLERY */
.gallery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px;}
.gallery-card{aspect-ratio:1;border-radius:12px;border:1px solid var(--border);overflow:hidden;cursor:pointer;transition:all 0.2s;position:relative;background:var(--s2);}
.gallery-card:hover{border-color:rgba(232,53,109,0.4);transform:scale(1.02);}
.gallery-card img{width:100%;height:100%;object-fit:cover;}
.gallery-card-overlay{position:absolute;inset:0;background:rgba(0,0,0,0.7);opacity:0;transition:opacity 0.2s;display:flex;align-items:center;justify-content:center;gap:10px;}
.gallery-card:hover .gallery-card-overlay{opacity:1;}
.gallery-action{padding:6px 12px;border-radius:8px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);color:#fff;cursor:pointer;font-size:11px;font-weight:700;display:flex;align-items:center;gap:4px;}
.gal-badge{position:absolute;top:8px;left:8px;font-size:10px;background:rgba(0,0,0,0.7);padding:3px 8px;border-radius:100px;color:#fff;}

/* BILLING */
.bill-card{background:var(--s1);border:1px solid var(--border);border-radius:18px;padding:28px;margin-bottom:20px;}
.bill-plan{font-family:'Clash Display',sans-serif;font-size:28px;font-weight:700;color:#fff;}
.credit-usage{background:var(--s2);border-radius:12px;padding:16px;margin-top:24px;}
.credit-row{display:flex;justify-content:space-between;margin-bottom:8px;font-size:13px;color:var(--muted);}
.credit-row span{color:var(--a2);font-weight:700;}
.price-items{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;}
.price-item{background:var(--s1);border:1px solid var(--border);border-radius:14px;padding:18px;display:flex;gap:12px;align-items:center;}
.price-icon{width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.06);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.price-name{font-weight:700;color:#fff;}
.price-credits{font-size:13px;color:var(--muted);}

/* MODAL */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:200;display:none;align-items:center;justify-content:center;backdrop-filter:blur(4px);}
.modal-overlay.open{display:flex;}
.modal{background:var(--s1);border:1px solid var(--border);border-radius:20px;padding:32px;max-width:520px;width:90%;}
.modal-title{font-size:24px;margin-bottom:8px;color:#fff;}
.modal-sub{color:var(--muted);font-size:14px;margin-bottom:24px;}
.plan-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:24px;}
.modal-plan{border:2px solid var(--border);border-radius:14px;padding:16px;text-align:center;cursor:pointer;transition:all 0.2s;}
.modal-plan:hover,.modal-plan.sel{border-color:var(--a1);background:rgba(232,53,109,0.08);}
.modal-plan-name{font-weight:700;margin-bottom:6px;color:#fff;}
.modal-plan-price{font-size:22px;font-weight:700;font-family:'Clash Display',sans-serif;color:#fff;}
.modal-plan-credits{font-size:11px;color:var(--a2);margin-top:4px;}
.pay-btn{width:100%;padding:14px;border-radius:12px;border:none;cursor:pointer;background:linear-gradient(135deg,var(--a1),var(--a2));color:#fff;font-weight:700;font-size:15px;font-family:'Cabinet Grotesk',sans-serif;transition:all 0.2s;}
.pay-btn:hover{transform:translateY(-1px);box-shadow:0 4px 24px var(--glow1);}
.close-modal{float:right;background:none;border:none;color:var(--muted);font-size:22px;cursor:pointer;margin-top:-8px;}

/* TOAST */
.toast{position:fixed;bottom:28px;right:28px;z-index:999;background:var(--s1);border:1px solid var(--border);border-radius:14px;padding:14px 20px;display:flex;align-items:center;gap:10px;transform:translateY(100px);opacity:0;transition:all 0.35s cubic-bezier(0.16,1,0.3,1);backdrop-filter:blur(20px);color:#fff;}
.toast.show{transform:translateY(0);opacity:1;}

@media(max-width:1100px){.workspace.active{grid-template-columns:1fr;}}
@media(max-width:768px){.sidebar{display:none;}.main{margin-left:0;}.content{padding:16px;}.topbar{padding:0 16px;}}
</style>
</head>
<body>

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-top">
    <div class="brand">
      <div class="brand-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="white"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg></div>
      <span class="brand-name">Valtor AI</span>
    </div>
    <div class="user-card">
      <div class="user-row">
        <div class="avatar" id="user-avatar">A</div>
        <div><div class="user-name" id="sidebar-name">Alex</div><div class="user-plan" id="sidebar-plan">Free Plan</div></div>
      </div>
      <div class="credit-bar-label">Credits <span id="credit-count">50 / 50</span></div>
      <div class="credit-bar"><div class="credit-fill" id="credit-bar" style="width:100%"></div></div>
    </div>
  </div>

  <nav class="sidebar-nav">
    <div class="nav-section-label">Overview</div>
    <div class="nav-item active" onclick="goSection('dashboard',this)">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></span>
      Dashboard
    </div>
    <div class="nav-section-label">Create</div>
    <div class="nav-item" onclick="goSection('image',this)">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="currentColor" stroke="none"/><path d="M21 15l-5-5L5 21"/></svg></span>
      Image Generator
    </div>
    <div class="nav-item" onclick="goSection('video',this)">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2"/></svg></span>
      Video Generator
    </div>
    <div class="nav-item" onclick="goSection('music',this)">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></span>
      Music Generator
    </div>
    <div class="nav-item" onclick="goSection('text',this)">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></span>
      Text AI
    </div>
    <div class="nav-section-label">Library</div>
    <div class="nav-item" onclick="goSection('gallery',this)">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg></span>
      My Gallery
    </div>
    <div class="nav-section-label">Account</div>
    <div class="nav-item" onclick="goSection('billing',this)">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="4" width="22" height="16" rx="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg></span>
      Billing & Credits
    </div>
    <div class="nav-item" onclick="window.location.href='1_landing-page.html'">
      <span class="nav-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></span>
      Home
    </div>
  </nav>

  <div class="upgrade-banner" id="upgrade-banner">
    <div class="upgrade-title">Upgrade to Creator</div>
    <div class="upgrade-sub">Get 500 credits/mo, priority generation & HD downloads for just $12/month.</div>
    <button class="upgrade-btn" onclick="openModal()">Upgrade now</button>
  </div>
</aside>

<!-- MAIN -->
<main class="main">
  <div class="topbar">
    <div class="page-title" id="page-title">Dashboard</div>
    <div class="topbar-right">
      <div class="credit-chip">
        <div class="credit-dot"></div>
        <svg width="14" height="14" viewBox="0 0 24 24" fill="white"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        <span id="top-credits">50</span> credits
      </div>
    </div>
  </div>

  <div class="content">

    <!-- DASHBOARD -->
    <section id="sec-dashboard" class="section-content" style="display:block;">
      <div class="dash-grid">
        <div class="dash-card">
          <div class="dash-card-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="white"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div>
          <div class="dash-card-val" id="d-credits">50</div><div class="dash-card-label">Credits remaining</div>
        </div>
        <div class="dash-card">
          <div class="dash-card-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="white" stroke="none"/><path d="M21 15l-5-5L5 21"/></svg></div>
          <div class="dash-card-val" id="d-images">0</div><div class="dash-card-label">Images generated</div>
        </div>
        <div class="dash-card">
          <div class="dash-card-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2"/></svg></div>
          <div class="dash-card-val" id="d-videos">0</div><div class="dash-card-label">Videos generated</div>
        </div>
        <div class="dash-card">
          <div class="dash-card-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></div>
          <div class="dash-card-val" id="d-music">0</div><div class="dash-card-label">Music tracks</div>
        </div>
      </div>
      <h3 style="font-size:18px;margin-bottom:16px;">Quick Actions</h3>
      <div class="quick-grid">
        <div class="quick-card" onclick="goSection('image',null)">
          <div class="quick-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="white" stroke="none"/><path d="M21 15l-5-5L5 21"/></svg></div>
          <div class="quick-title">Generate Image</div><div class="quick-sub">2 credits each</div>
        </div>
        <div class="quick-card" onclick="goSection('video',null)">
          <div class="quick-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2"/></svg></div>
          <div class="quick-title">Create Video</div><div class="quick-sub">10 credits each</div>
        </div>
        <div class="quick-card" onclick="goSection('music',null)">
          <div class="quick-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></div>
          <div class="quick-title">Make Music</div><div class="quick-sub">5 credits each</div>
        </div>
        <div class="quick-card" onclick="goSection('text',null)">
          <div class="quick-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div>
          <div class="quick-title">Write with AI</div><div class="quick-sub">1 credit each</div>
        </div>
      </div>
    </section>

    <!-- IMAGE GENERATOR -->
    <section id="sec-image" class="section-content">
      <div class="workspace active">
        <div class="ctrl-panel">
          <div class="ctrl-group"><div class="ctrl-label">Prompt</div><textarea id="img-prompt" rows="4" placeholder="A hyper-realistic portrait of an astronaut floating in a golden nebula, dramatic lighting, 8K..."></textarea></div>
          <div class="ctrl-group"><div class="ctrl-label">Negative Prompt</div><textarea id="img-neg" rows="2" placeholder="blurry, low quality, watermark..."></textarea></div>
          <div class="ctrl-group">
            <div class="ctrl-label">Style Presets</div>
            <div class="chips" id="img-chips">
              <span class="chip" onclick="toggleChip(this,'img-prompt','photorealistic, ultra detailed')">Photo</span>
              <span class="chip" onclick="toggleChip(this,'img-prompt','anime, vibrant, Studio Ghibli')">Anime</span>
              <span class="chip" onclick="toggleChip(this,'img-prompt','cinematic, film grain, anamorphic')">Cinema</span>
              <span class="chip" onclick="toggleChip(this,'img-prompt','oil painting, impressionist')">Art</span>
              <span class="chip" onclick="toggleChip(this,'img-prompt','3D render, Octane, volumetric light')">3D</span>
              <span class="chip" onclick="toggleChip(this,'img-prompt','pixel art, 16-bit, retro game')">Pixel</span>
              <span class="chip" onclick="toggleChip(this,'img-prompt','watercolor, soft, dreamy')">Watercolor</span>
              <span class="chip" onclick="toggleChip(this,'img-prompt','dark fantasy, dramatic, epic')">Fantasy</span>
            </div>
          </div>
          <div class="ctrl-group"><div class="ctrl-label">Model</div><select id="img-model"><option value="black-forest-labs/FLUX.1-schnell">FLUX.1 Schnell (Fast)</option><option value="stability-ai/sdxl">Stable Diffusion XL</option><option value="playgroundai/playground-v2.5-1024px-aesthetic">Playground v2.5</option><option value="stability-ai/stable-diffusion-3">Stable Diffusion 3</option></select></div>
          <div class="ctrl-group"><div class="ctrl-label">Size</div><select id="img-size"><option value="1:1">1:1 Square</option><option value="16:9">16:9 Wide</option><option value="9:16">9:16 Portrait</option></select></div>
          <div class="ctrl-group"><div class="range-row"><span class="ctrl-label">Steps</span><span class="range-val" id="steps-v">28</span></div><input type="range" min="10" max="50" value="28" oninput="document.getElementById('steps-v').textContent=this.value"></div>
          <div class="ctrl-group"><div class="range-row"><span class="ctrl-label">Guidance</span><span class="range-val" id="cfg-v">7.5</span></div><input type="range" min="1" max="20" step="0.5" value="7.5" oninput="document.getElementById('cfg-v').textContent=this.value"></div>
          <div class="cost-badge">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="white"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
            Costs <strong style="margin:0 4px;">2 credits</strong> per image
          </div>
          <button class="gen-btn" onclick="generate('image')">Generate Image</button>
        </div>
        <div class="out-panel">
          <div class="out-header">
            <div class="out-title">Output</div>
            <div class="out-actions">
              <button class="out-btn" onclick="downloadResult('image')"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> Download</button>
              <button class="out-btn" onclick="copyPromptText()"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg> Copy prompt</button>
              <button class="out-btn" onclick="saveToGallery('image')"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/></svg> Save</button>
            </div>
          </div>
          <div class="output-canvas" id="image-canvas">
            <div class="loader" id="image-loader"><div class="spin"></div><div class="load-text" id="image-load-text">Generating image...</div><div class="load-step" id="image-load-step">Initializing</div><div class="progress-wrap"><div class="prog-bar"><div class="prog-fill" id="image-prog"></div></div></div></div>
            <div class="empty-state" id="image-empty">
              <div class="empty-icon"><svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="white" stroke="none"/><path d="M21 15l-5-5L5 21"/></svg></div>
              <p>Your image will appear here</p>
            </div>
            <img id="image-result" class="result-img" alt="Generated">
          </div>
        </div>
      </div>
    </section>

    <!-- VIDEO GENERATOR -->
    <section id="sec-video" class="section-content">
      <div class="workspace active">
        <div class="ctrl-panel">
          <div class="ctrl-group"><div class="ctrl-label">Video Prompt</div><textarea id="vid-prompt" rows="5" placeholder="A lone surfer riding a massive wave at sunset, slow motion, cinematic, golden hour..."></textarea></div>
          <div class="ctrl-group">
            <div class="ctrl-label">Style Presets</div>
            <div class="chips">
              <span class="chip" onclick="setChip('vid-prompt','Cinematic slow motion, film grain, dramatic')">Cinematic</span>
              <span class="chip" onclick="setChip('vid-prompt','Aerial drone shot, sweeping landscape')">Aerial</span>
              <span class="chip" onclick="setChip('vid-prompt','Time-lapse, hyperspeed, dynamic movement')">Time-lapse</span>
              <span class="chip" onclick="setChip('vid-prompt','Anime style, vibrant, fluid animation')">Anime</span>
            </div>
          </div>
          <div class="ctrl-group"><div class="ctrl-label">Model</div><select id="vid-model"><option value="minimax/video-01">MiniMax Video-01</option><option value="luma/dream-machine">Luma Dream Machine</option><option value="wan-video/wan-2.1">Wan 2.1</option><option value="stability-ai/stable-video-diffusion">Stable Video Diffusion</option></select></div>
          <div class="ctrl-group"><div class="ctrl-label">Duration</div><select id="vid-dur"><option value="5">5 seconds</option><option value="10">10 seconds</option><option value="15">15 seconds</option></select></div>
          <div class="cost-badge"><svg width="14" height="14" viewBox="0 0 24 24" fill="white"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> Costs <strong style="margin:0 4px;">10 credits</strong> per video</div>
          <button class="gen-btn" onclick="generate('video')">Generate Video</button>
        </div>
        <div class="out-panel">
          <div class="out-header"><div class="out-title">Video Output</div><div class="out-actions"><button class="out-btn" onclick="downloadResult('video')"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> Download</button></div></div>
          <div class="output-canvas" id="video-canvas">
            <div class="loader" id="video-loader"><div class="spin"></div><div class="load-text">Generating video... (~2 min)</div><div class="progress-wrap"><div class="prog-bar"><div class="prog-fill" id="video-prog"></div></div></div></div>
            <div class="empty-state" id="video-empty">
              <div class="empty-icon"><svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2"/></svg></div>
              <p>Your video will appear here</p>
            </div>
            <video id="video-result" class="result-video" controls></video>
          </div>
        </div>
      </div>
    </section>

    <!-- MUSIC GENERATOR -->
    <section id="sec-music" class="section-content">
      <div class="workspace active">
        <div class="ctrl-panel">
          <div class="ctrl-group"><div class="ctrl-label">Music Description</div><textarea id="music-prompt" rows="4" placeholder="Chill lo-fi hip hop, warm vinyl crackle, soft piano, mellow beats, late night vibes..."></textarea></div>
          <div class="ctrl-group">
            <div class="ctrl-label">Genre Presets</div>
            <div class="chips">
              <span class="chip" onclick="setChip('music-prompt','Lo-fi hip hop, warm beats, soft piano, vinyl crackle')">Lo-Fi</span>
              <span class="chip" onclick="setChip('music-prompt','Epic cinematic orchestral, rising strings, heroic')">Epic</span>
              <span class="chip" onclick="setChip('music-prompt','Electronic dance music, pulsing bass, synth leads')">EDM</span>
              <span class="chip" onclick="setChip('music-prompt','Dark ambient atmospheric drone, mysterious, cinematic')">Ambient</span>
              <span class="chip" onclick="setChip('music-prompt','Upbeat acoustic pop, guitar strumming, feel-good')">Pop</span>
              <span class="chip" onclick="setChip('music-prompt','Jazz piano trio, walking bass, brushed drums, bebop')">Jazz</span>
            </div>
          </div>
          <div class="ctrl-group"><div class="ctrl-label">Model</div><select id="music-model"><option value="facebook/musicgen-small">MusicGen Small (Fast)</option><option value="facebook/musicgen-medium">MusicGen Medium</option><option value="facebook/musicgen-large">MusicGen Large (Best)</option></select></div>
          <div class="ctrl-group"><div class="range-row"><span class="ctrl-label">Duration</span><span class="range-val" id="dur-v">15s</span></div><input type="range" min="5" max="60" step="5" value="15" oninput="document.getElementById('dur-v').textContent=this.value+'s'"></div>
          <div class="cost-badge"><svg width="14" height="14" viewBox="0 0 24 24" fill="white"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> Costs <strong style="margin:0 4px;">5 credits</strong> per track</div>
          <button class="gen-btn" onclick="generate('music')">Generate Music</button>
        </div>
        <div class="out-panel">
          <div class="out-header"><div class="out-title">Audio Output</div><div class="out-actions"><button class="out-btn" onclick="downloadResult('music')"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> Download</button></div></div>
          <div class="output-canvas" id="music-canvas" style="flex-direction:column;padding:32px;">
            <div class="loader" id="music-loader"><div class="spin"></div><div class="load-text">Composing your track...</div></div>
            <div class="empty-state" id="music-empty">
              <div class="empty-icon"><svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></div>
              <p>Your music will appear here</p>
            </div>
            <div class="result-audio-wrap" id="audio-wrap">
              <div style="margin-bottom:16px;display:flex;justify-content:center;"><svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><path d="M3 18v-6a9 9 0 0118 0v6"/><path d="M21 19a2 2 0 01-2 2h-1a2 2 0 01-2-2v-3a2 2 0 012-2h3zM3 19a2 2 0 002 2h1a2 2 0 002-2v-3a2 2 0 00-2-2H3z"/></svg></div>
              <audio id="audio-result" controls style="width:100%;accent-color:var(--a1);"></audio>
              <div id="waveform" style="display:flex;align-items:center;justify-content:center;gap:3px;margin-top:20px;height:50px;"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TEXT AI -->
    <section id="sec-text" class="section-content">
      <div class="workspace active">
        <div class="ctrl-panel">
          <div class="ctrl-group"><div class="ctrl-label">Your Request</div><textarea id="text-prompt" rows="5" placeholder="Write a compelling 60-second Instagram caption for a travel photo in Santorini at sunset..."></textarea></div>
          <div class="ctrl-group">
            <div class="ctrl-label">Mode</div>
            <div class="chips" id="text-mode-chips">
              <span class="chip on" onclick="setMode(this,'creative')">Creative</span>
              <span class="chip" onclick="setMode(this,'script')">Script</span>
              <span class="chip" onclick="setMode(this,'story')">Story</span>
              <span class="chip" onclick="setMode(this,'caption')">Caption</span>
              <span class="chip" onclick="setMode(this,'marketing')">Marketing</span>
              <span class="chip" onclick="setMode(this,'business')">Business</span>
            </div>
          </div>
          <div class="ctrl-group"><div class="ctrl-label">Model</div><select id="text-model"><option value="mistralai/Mistral-7B-Instruct-v0.3">Mistral 7B (Fast)</option><option value="meta-llama/Llama-3.2-11B-Vision-Instruct">Llama 3.2 11B</option><option value="google/gemma-2-9b-it">Gemma 2 9B</option><option value="HuggingFaceH4/zephyr-7b-beta">Zephyr 7B Beta</option></select></div>
          <div class="ctrl-group"><div class="range-row"><span class="ctrl-label">Length</span><span class="range-val" id="len-v">500</span></div><input type="range" min="50" max="2000" step="50" value="500" oninput="document.getElementById('len-v').textContent=this.value"></div>
          <div class="cost-badge"><svg width="14" height="14" viewBox="0 0 24 24" fill="white"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg> Costs <strong style="margin:0 4px;">1 credit</strong> per request</div>
          <button class="gen-btn" onclick="generate('text')">Generate Text</button>
        </div>
        <div class="out-panel">
          <div class="out-header"><div class="out-title">Text Output</div><div class="out-actions"><button class="out-btn" onclick="copyText()"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/></svg> Copy</button><button class="out-btn" onclick="downloadResult('text')"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg> Download</button></div></div>
          <div class="output-canvas" id="text-canvas" style="align-items:flex-start;justify-content:flex-start;min-height:400px;">
            <div class="loader" id="text-loader"><div class="spin"></div><div class="load-text">Writing your content...</div></div>
            <div class="empty-state" id="text-empty" style="margin:auto;">
              <div class="empty-icon"><svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div>
              <p>Your text will appear here</p>
            </div>
            <div class="result-text-wrap" id="text-result"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="sec-gallery" class="section-content">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;">
        <h3 style="font-size:20px;">My Gallery</h3>
        <div style="display:flex;gap:8px;">
          <button class="out-btn" onclick="filterGallery('all')" id="gf-all" style="border-color:var(--a1);color:var(--a1);">All</button>
          <button class="out-btn" onclick="filterGallery('image')" id="gf-image">Images</button>
          <button class="out-btn" onclick="filterGallery('video')" id="gf-video">Videos</button>
          <button class="out-btn" onclick="filterGallery('music')" id="gf-music">Music</button>
        </div>
      </div>
      <div class="gallery-grid" id="gallery-grid">
        <div style="text-align:center;padding:60px;color:var(--muted);grid-column:1/-1;">
          <div style="width:60px;height:60px;margin:0 auto 12px;opacity:0.2;"><svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg></div>
          <p>Your saved creations will appear here</p>
        </div>
      </div>
    </section>

    <!-- BILLING -->
    <section id="sec-billing" class="section-content">
      <h3 style="font-size:22px;margin-bottom:8px;">Billing & Credits</h3>
      <p style="color:var(--muted);font-size:14px;margin-bottom:32px;">Manage your subscription and credits</p>
      <div class="bill-card">
        <div style="display:flex;justify-content:space-between;align-items:start;flex-wrap:wrap;gap:16px;">
          <div>
            <div style="font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Current Plan</div>
            <div class="bill-plan" id="billing-plan">Free</div>
            <div style="color:var(--muted);font-size:14px;margin-top:4px;">Resets monthly</div>
          </div>
          <button class="gen-btn" style="width:auto;padding:12px 28px;font-size:14px;" onclick="openModal()">Upgrade Plan</button>
        </div>
        <div class="credit-usage">
          <div class="credit-row">Credits used this month <span id="billing-credits">0 / 50</span></div>
          <div class="prog-bar" style="height:6px;"><div class="prog-fill" id="billing-bar" style="width:0%"></div></div>
        </div>
      </div>
      <h4 style="font-size:16px;margin-bottom:16px;">Credit Pricing</h4>
      <div class="price-items">
        <div class="price-item"><div class="price-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="white" stroke="none"/><path d="M21 15l-5-5L5 21"/></svg></div><div><div class="price-name">Image</div><div class="price-credits">2 credits each</div></div></div>
        <div class="price-item"><div class="price-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2"/></svg></div><div><div class="price-name">Video</div><div class="price-credits">10 credits each</div></div></div>
        <div class="price-item"><div class="price-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg></div><div><div class="price-name">Music</div><div class="price-credits">5 credits each</div></div></div>
        <div class="price-item"><div class="price-icon"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg></div><div><div class="price-name">Text AI</div><div class="price-credits">1 credit each</div></div></div>
      </div>
    </section>

  </div>
</main>

<!-- UPGRADE MODAL -->
<div class="modal-overlay" id="modal">
  <div class="modal">
    <button class="close-modal" onclick="closeModal()">×</button>
    <h2 class="modal-title">Upgrade Plan</h2>
    <p class="modal-sub">Choose your plan. Cancel anytime.</p>
    <div class="plan-grid">
      <div class="modal-plan sel" onclick="selectModalPlan(this,'creator',12)"><div class="modal-plan-name">Creator</div><div class="modal-plan-price">$12</div><div class="modal-plan-credits">500 credits/mo</div></div>
      <div class="modal-plan" onclick="selectModalPlan(this,'pro',29)"><div class="modal-plan-name">Pro</div><div class="modal-plan-price">$29</div><div class="modal-plan-credits">2000 credits/mo</div></div>
      <div class="modal-plan" onclick="selectModalPlan(this,'business',79)"><div class="modal-plan-name">Business</div><div class="modal-plan-price">$79</div><div class="modal-plan-credits">Unlimited</div></div>
    </div>
    <button class="pay-btn" onclick="handlePayment()">Pay with Stripe</button>
    <p style="font-size:12px;color:var(--muted);text-align:center;margin-top:12px;">Secured by Stripe · Cancel anytime</p>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <span id="toast-icon-wrap"></span>
  <span id="toast-msg">Done!</span>
</div>

<script>
let user=JSON.parse(localStorage.getItem('valtor_user')||'{"name":"Alex","email":"","credits":50,"plan":"free","images":0,"videos":0,"music":0}');
let gallery=JSON.parse(localStorage.getItem('valtor_gallery')||'[]');
let textMode='creative',modalPlan='creator',modalPrice=12;
let currentResults={};

const svgCheck='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#4ade80" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>';
const svgX='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#f87171" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>';
const svgWarn='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#fbbf24" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>';

function init(){
  document.getElementById('user-avatar').textContent=user.name?.charAt(0)?.toUpperCase()||'U';
  document.getElementById('sidebar-name').textContent=user.name||'User';
  document.getElementById('sidebar-plan').textContent=capitalize(user.plan||'free')+' Plan';
  updateCredits(user.credits);updateDashboard();
}
function updateCredits(val){
  user.credits=val;
  const max={free:50,creator:500,pro:2000,business:99999}[user.plan]||50;
  const pct=Math.min(100,(val/max)*100);
  document.getElementById('credit-count').textContent=`${val} / ${max}`;
  document.getElementById('credit-bar').style.width=pct+'%';
  document.getElementById('top-credits').textContent=val;
  document.getElementById('d-credits').textContent=val;
  document.getElementById('billing-credits').textContent=`${max-val} / ${max}`;
  document.getElementById('billing-bar').style.width=((max-val)/max*100)+'%';
  saveUser();
}
function updateDashboard(){document.getElementById('d-images').textContent=user.images||0;document.getElementById('d-videos').textContent=user.videos||0;document.getElementById('d-music').textContent=user.music||0;}
function saveUser(){localStorage.setItem('valtor_user',JSON.stringify(user));}
function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1);}

function goSection(name,el){
  document.querySelectorAll('.section-content').forEach(s=>s.style.display='none');
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  document.getElementById('sec-'+name).style.display='block';
  if(el)el.classList.add('active');
  const titles={dashboard:'Dashboard',image:'Image Generator',video:'Video Generator',music:'Music Generator',text:'Text AI',gallery:'My Gallery',billing:'Billing & Credits'};
  document.getElementById('page-title').textContent=titles[name]||name;
  if(name==='gallery')renderGallery('all');
}

function toggleChip(chip,target,style){chip.classList.toggle('on');const el=document.getElementById(target);if(chip.classList.contains('on')){el.value=el.value?el.value+', '+style:style;}else{el.value=el.value.replace(', '+style,'').replace(style+', ','').replace(style,'').trim();}}
function setChip(target,val){document.getElementById(target).value=val;}
function setMode(chip,mode){document.querySelectorAll('#text-mode-chips .chip').forEach(c=>c.classList.remove('on'));chip.classList.add('on');textMode=mode;}

const creditCosts={image:2,video:10,music:5,text:1};
const loadingMessages={image:['Initializing model...','Processing prompt...','Rendering pixels...','Applying details...','Final polish...'],video:['Loading video model...','Generating frames...','Compositing...','Encoding video...'],music:['Loading MusicGen...','Analyzing prompt...','Composing melody...'],text:['Loading model...','Processing...','Writing...']};

async function generate(type){
  const cost=creditCosts[type];
  if(user.credits<cost){showToast('warn','Not enough credits! Need '+cost+', have '+user.credits);openModal();return;}
  setLoading(type,true);startProgressAnim(type);
  try{
    let result;
    if(type==='image')result=await generateImage();
    else if(type==='video')result=await generateVideo();
    else if(type==='music')result=await generateMusic();
    else if(type==='text')result=await generateText();
    if(result){updateCredits(user.credits-cost);updateDashboard();saveUser();showToast('ok',capitalize(type)+' generated! Used '+cost+' credits.');}
  }catch(err){showToast('err',err.message||'Generation failed');}
  finally{setLoading(type,false);}
}

async function callHF(model,body,isBlob=true){
  const token=localStorage.getItem('valtor-hf-token')||'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';
  const res=await fetch('https://api-inference.huggingface.co/models/'+model,{method:'POST',headers:{'Authorization':'Bearer '+token,'Content-Type':'application/json'},body:JSON.stringify(body)});
  if(!res.ok){const err=await res.json().catch(()=>({}));if(res.status===503)throw new Error('Model loading, retry in 20s');throw new Error(err.error||'API Error '+res.status);}
  return isBlob?await res.blob():await res.json();
}

async function generateImage(){
  const prompt=document.getElementById('img-prompt').value.trim();
  if(!prompt){showToast('warn','Enter a prompt!');return null;}
  const blob=await callHF(document.getElementById('img-model').value,{inputs:prompt,parameters:{negative_prompt:document.getElementById('img-neg').value||undefined}});
  const url=URL.createObjectURL(blob);
  const img=document.getElementById('image-result');img.src=url;img.style.display='block';
  document.getElementById('image-empty').style.display='none';
  currentResults.image={url,blob,prompt};user.images=(user.images||0)+1;return true;
}
async function generateVideo(){
  const prompt=document.getElementById('vid-prompt').value.trim();
  if(!prompt){showToast('warn','Enter a prompt!');return null;}
  const blob=await callHF(document.getElementById('vid-model').value,{inputs:prompt});
  const url=URL.createObjectURL(blob);
  const vid=document.getElementById('video-result');vid.src=url;vid.style.display='block';
  document.getElementById('video-empty').style.display='none';
  currentResults.video={url,blob,prompt};user.videos=(user.videos||0)+1;return true;
}
async function generateMusic(){
  const prompt=document.getElementById('music-prompt').value.trim();
  if(!prompt){showToast('warn','Enter a description!');return null;}
  const blob=await callHF(document.getElementById('music-model').value,{inputs:prompt});
  const url=URL.createObjectURL(blob);
  document.getElementById('audio-result').src=url;
  document.getElementById('music-empty').style.display='none';
  document.getElementById('audio-wrap').style.display='block';
  buildWaveform();currentResults.music={url,blob,prompt};user.music=(user.music||0)+1;return true;
}
async function generateText(){
  const prompt=document.getElementById('text-prompt').value.trim();
  if(!prompt){showToast('warn','Enter a prompt!');return null;}
  const sys={creative:'Be creative.',script:'Write scripts.',story:'Write engaging stories.',caption:'Write viral captions.',marketing:'Write compelling copy.',business:'Write professional content.'};
  const data=await callHF(document.getElementById('text-model').value,{inputs:(sys[textMode]||'')+'\n'+prompt,parameters:{max_new_tokens:500,temperature:0.8,do_sample:true}},false);
  let text=Array.isArray(data)?data[0]?.generated_text||'':data.generated_text||'';
  text=text.replace((sys[textMode]||'')+'\n'+prompt,'').trim();
  document.getElementById('text-empty').style.display='none';
  const el=document.getElementById('text-result');el.style.display='block';
  currentResults.text=text;let i=0;el.textContent='';
  const t=setInterval(()=>{if(i<text.length){el.textContent+=text[i++];}else clearInterval(t);},12);
  return true;
}

function setLoading(type,active){const l=document.getElementById(type+'-loader');if(l)l.classList.toggle('show',active);document.querySelectorAll('.gen-btn').forEach(b=>b.disabled=active);}
function startProgressAnim(type){
  const fill=document.getElementById(type+'-prog');if(!fill)return;fill.style.width='0%';
  let pct=0;const msgs=loadingMessages[type]||[];let mi=0;
  const tEl=document.getElementById(type+'-load-text'),sEl=document.getElementById(type+'-load-step');
  const iv=setInterval(()=>{pct+=Math.random()*4;if(pct>=92){clearInterval(iv);return;}fill.style.width=pct+'%';const ni=Math.floor((pct/92)*msgs.length);if(tEl&&msgs[ni]&&ni!==mi){tEl.textContent=msgs[ni];mi=ni;}if(sEl)sEl.textContent=Math.floor(pct)+'%';},400);
}
function buildWaveform(){
  const w=document.getElementById('waveform');w.innerHTML='';
  for(let i=0;i<50;i++){const b=document.createElement('div');const h=8+Math.random()*42;b.style.cssText=`width:3px;height:${h}px;background:linear-gradient(var(--a1),var(--a2));border-radius:2px;animation:wv ${0.4+Math.random()*0.8}s ease-in-out infinite alternate;animation-delay:${Math.random()*0.5}s`;w.appendChild(b);}
  if(!document.getElementById('wv-style')){const s=document.createElement('style');s.id='wv-style';s.textContent='@keyframes wv{from{transform:scaleY(1)}to{transform:scaleY(0.15)}}';document.head.appendChild(s);}
}
function downloadResult(type){
  const r=currentResults[type];if(!r){showToast('warn','Nothing to download yet!');return;}
  const exts={image:'png',video:'mp4',music:'wav',text:'txt'};
  if(type==='text'){const a=document.createElement('a');a.href='data:text/plain;charset=utf-8,'+encodeURIComponent(r);a.download='valtor-text-'+Date.now()+'.txt';a.click();}
  else{const a=document.createElement('a');a.href=r.url;a.download='valtor-'+type+'-'+Date.now()+'.'+exts[type];a.click();}
}
function copyPromptText(){navigator.clipboard.writeText(document.getElementById('img-prompt').value);showToast('ok','Prompt copied!');}
function copyText(){navigator.clipboard.writeText(currentResults.text||'');showToast('ok','Text copied!');}
function saveToGallery(type){
  const r=currentResults[type];if(!r){showToast('warn','Generate something first!');return;}
  gallery.unshift({id:Date.now(),type,prompt:r.prompt||'',url:r.url||null,date:new Date().toLocaleString()});
  localStorage.setItem('valtor_gallery',JSON.stringify(gallery));showToast('ok','Saved to gallery!');
}
function renderGallery(filter){
  const grid=document.getElementById('gallery-grid');
  const items=filter==='all'?gallery:gallery.filter(g=>g.type===filter);
  const icons={image:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5" fill="white" stroke="none"/><path d="M21 15l-5-5L5 21"/></svg>',video:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2"/></svg>',music:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>',text:'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>'};
  if(!items.length){grid.innerHTML='<div style="text-align:center;padding:60px;color:var(--muted);grid-column:1/-1;"><div style="width:60px;height:60px;margin:0 auto 12px;opacity:0.2;"><svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg></div><p>No saved creations yet</p></div>';return;}
  grid.innerHTML=items.map(item=>`<div class="gallery-card">${item.url?`<img src="${item.url}" alt="">`:`<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;opacity:0.3">${icons[item.type]||''}</div>`}<div class="gal-badge">${item.type}</div><div class="gallery-card-overlay">${item.url?`<button class="gallery-action" onclick="window.open('${item.url}')"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg> View</button>`:''}  <button class="gallery-action" onclick="deleteFromGallery(${item.id})"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6l-1 14H6L5 6"/></svg></button></div></div>`).join('');
}
function filterGallery(filter){['all','image','video','music'].forEach(f=>{const btn=document.getElementById('gf-'+f);if(btn){btn.style.borderColor=f===filter?'var(--a1)':'var(--border)';btn.style.color=f===filter?'var(--a1)':'';}});renderGallery(filter);}
function deleteFromGallery(id){gallery=gallery.filter(g=>g.id!==id);localStorage.setItem('valtor_gallery',JSON.stringify(gallery));renderGallery('all');}
function openModal(){document.getElementById('modal').classList.add('open');}
function closeModal(){document.getElementById('modal').classList.remove('open');}
function selectModalPlan(el,plan,price){document.querySelectorAll('.modal-plan').forEach(p=>p.classList.remove('sel'));el.classList.add('sel');modalPlan=plan;modalPrice=price;}
function handlePayment(){
  const credits={creator:500,pro:2000,business:99999};
  user.plan=modalPlan;user.credits=credits[modalPlan]||500;
  document.getElementById('sidebar-plan').textContent=capitalize(modalPlan)+' Plan';
  document.getElementById('upgrade-banner').style.display=modalPlan!=='free'?'none':'';
  document.getElementById('billing-plan').textContent=capitalize(modalPlan);
  updateCredits(user.credits);saveUser();closeModal();
  showToast('ok','Upgraded to '+capitalize(modalPlan)+'! '+user.credits+' credits added.');
}
function showToast(type,msg){
  const icons={ok:svgCheck,err:svgX,warn:svgWarn};
  document.getElementById('toast-icon-wrap').innerHTML=icons[type]||'';
  document.getElementById('toast-msg').textContent=msg;
  const t=document.getElementById('toast');t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),3500);
}
document.getElementById('modal').addEventListener('click',function(e){if(e.target===this)closeModal();});
init();
</script>
</body>
</html>
